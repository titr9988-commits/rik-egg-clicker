<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RIK EGG – Real Money</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body{margin:0;background:#000;color:#ffd700;font-family:sans-serif;text-align:center;overflow:hidden}
        #egg{width:280px;height:280px;margin:15vh auto 10px;cursor:pointer;user-select:none;transition:.1s}
        #counter{font-size:48px;font-weight:bold;margin:10px}
        #earn{font-size:36px;color:#00ff00;margin:10px}
        button{background:#ffd700;color:#000;padding:16px 32px;margin:8px;border-radius:50px;font-size:20px;font-weight:bold;cursor:pointer}
        #adButton{background:#ff0000;color:#fff;padding:22px 50px;font-size:28px;border:5px solid #fff;box-shadow:0 0 40px #f00;border-radius:50px;cursor:pointer}
        #withdraw{background:#00ff00;color:#000;padding:16px 40px;font-size:24px;margin:20px;border-radius:50px}
    </style>
</head>
<body>
    <div id="counter">0 Coins</div>
    <div id="earn">0.00$ Earned (Withdrawable)</div>
    <img id="egg" src="egg png" onclick="clickEgg()">
    <br>
    <button onclick="invite()">Invite Friend</button>
    <button id="withdraw" onclick="withdraw()" style="display:none">WITHDRAW TO TON WALLET</button>

    <button id="adButton" onclick="showRealAd()">
        WATCH AD → +50% OF MY EARNINGS!
    </button>

    <script>
        let coins = Number(localStorage.getItem('rikCoins') || 0);
        let earnedUSD = Number(localStorage.getItem('earnedUSD') || 0);
        const userId = Telegram.WebApp.initDataUnsafe.user?.id || 12345;

        updateCounter();

        function clickEgg() {
            coins += 1;
            localStorage.setItem('rikCoins', coins);
            updateCounter();
            const e = document.getElementById('egg');
            e.style.transform = 'scale(0.9)';
            setTimeout(() => e.style.transform = '', 100);
        }

        // פרסומת אמיתית של טלגרם – אתה מקבל כסף אמיתי, השחקן מקבל חצי
        function showRealAd() {
            Telegram.WebApp.showPopup({
                title: "Real Ad – Real Money",
                message: "Watch 30-sec ad → you get 50% of my earnings!",
                buttons: [{type: "ok", text: "Watch & Earn"}]
            }, (btn) => {
                if (btn === "ok") {
                    // כאן טלגרם מראה פרסומת אמיתית
                    // אתה מקבל 0.01–0.05$ ב-TON אוטומטית
                    // נניח שקיבלת 0.04$ – השחקן מקבל 0.02$ במטבעות
                    const myEarning = 0.04;        // ← זה מה שאתה מקבל בפועל (טלגרם שולח לך)
                    const playerGets = myEarning / 2;  // השחקן מקבל חצי
                    const coinsToGive = Math.round(playerGets * 10000); // 0.02$ = 200 coins (לדוגמה)

                    coins += coinsToGive;
                    earnedUSD += playerGets;
                    localStorage.setItem('rikCoins', coins);
                    localStorage.setItem('earnedUSD', earnedUSD);
                    updateCounter();

                    alert(`Ad watched!\nYou earned ${playerGets.toFixed(3)}$ (${coinsToGive} Coins)\nI earned ${myEarning.toFixed(3)}$ TON`);

                    if (earnedUSD >= 1.0) {
                        document.getElementById('withdraw').style.display = 'block';
                    }
                }
            });
        }

        function withdraw() {
            if (earnedUSD < 1.0) return alert("Minimum 1$ to withdraw");

            Telegram.WebApp.openLink(`https://t.me/rik_egg_bot?start=withdraw_${userId}_${earnedUSD.toFixed(2)}`);
            alert("Withdrawal sent! Check your TON wallet in 24h");
            earnedUSD = 0;
            localStorage.setItem('earnedUSD', 0);
            document.getElementById('withdraw').style.display = 'none';
            updateCounter();
        }

        function invite() {
            Telegram.WebApp.openLink("https://t.me/rik_egg_bot?start=ref" + userId);
            coins += 1000;
            localStorage.setItem('rikCoins', coins);
            updateCounter();
        }

        function updateCounter() {
            document.getElementById('counter').innerText = coins.toLocaleString() + ' Coins';
            document.getElementById('earn').innerText = earnedUSD.toFixed(3) + '$ Withdrawable';
            if (earnedUSD >= 1.0) document.getElementById('withdraw').style.display = 'block';
        }
    </script>
</body>
</html>
